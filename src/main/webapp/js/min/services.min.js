var cascadiaServices=angular.module("cascadiaServices",[]);cascadiaServices.factory("InitUserMap",["Restangular",function(e){return function(t){!t.isAuthenticated||t.userMap&&0!=t.userMap.length||(t.userMap={},e.one("users").getList().then(function(e){t.userList=e;for(var r=0;r<t.userList.length;++r)t.userMap[t.userList[r].id]=t.userList[r]}))}}]),cascadiaServices.factory("AuthenticateUser",["$location","Restangular",function(e,t){return function(r){r.isAuthenticated=localStorage.getItem("token")?!0:!1,r.isAuthenticated?t.setDefaultHeaders({Authorization:"Basic "+localStorage.getItem("token")}):e.path("/login")}}]),cascadiaServices.factory("permissions",function(e){var t;return{setPermissions:function(r){t=r,e.$broadcast("permissionsChanged")},hasPermission:function(e){return e=e.trim(),_.some(t,function(t){return _.isString(t.Name)?t.Name.trim()===e:void 0})}}}),cascadiaServices.factory("GrowlResponse",[function(){return function(e){200==e.status?$.growl.notice({title:"Success!",message:"Successful HTTP operation"}):201==e.status?$.growl.notice({title:"Sucess!",message:"Object created"}):400==e.status?$.growl.error({title:"Error!",message:"Missing username or password."}):401==e.status?$.growl.error({title:"Error!",message:e.error}):403==e.status?$.growl.error({title:"Error!",message:"Forbidden."}):404==e.status?$.growl.error({title:"Error!",message:"Not found. You may be pointing to the wrong endpoint."}):$.growl.error({title:"Error!",message:"Status Code "+e.status})}}]),cascadiaServices.factory("AssignUser",function(){return function(e){e.user=JSON.parse(localStorage.getItem("user"))}});