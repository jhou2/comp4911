var cascadiaControllers=angular.module("cascadiaControllers",["base64","restangular"]);cascadiaControllers.service("CascadiaService",function(e){e.user=JSON.parse(localStorage.getItem("user"))}),cascadiaControllers.controller("IndexController",["$scope","CascadiaService","$location",function(e,n,a){e.logout=function(){localStorage.clear(),a.path("/login")}}]),cascadiaControllers.controller("TimesheetController",["$scope","CascadiaService","$location","Restangular",function(e,n,a,t){t.one("timesheets").getList().then(function(n){e.timesheets=n})}]),cascadiaControllers.controller("LoginController",["$scope","$base64","Restangular","$rootScope","$location","CascadiaService",function(e,n,a,t,s){e.login=function(){var t={username:e.username,password:e.password};a.one("user").post("token",t).then(function(t){e.encodedString=n.encode(t.token+":"),localStorage.setItem("token",e.encodedString),a.setDefaultHeaders({Authorization:"Basic "+e.encodedString}),a.one("user").get().then(function(e){localStorage.setItem("user",JSON.stringify(e)),s.path("/dashboard")})})}}]),cascadiaControllers.controller("DashboardController",["$scope","$rootScope","Restangular","CascadiaService",function(){}]),cascadiaControllers.controller("PackageController",["$scope",function(n){function a(e){e.selected===!0&&e.disabled!==!0&&(n.selectedPackages.push({number:e.number,title:e.title,selected:!1}),e.disabled=!0,e.selected=!1)}function t(e){if(void 0!==e&&e.selected===!0){for(var a=e.number,t=0;t<n.packages.length;t++)n.packages[t].number==a&&(n.packages[t].disabled=!1);var s=n.selectedPackages.indexOf(e);return s>-1&&n.selectedPackages.splice(s,1),!0}return!1}n.packages=[{number:"B1111",title:"Project Setup",selected:!1,disabled:!1},{number:"B1112",title:"Ongoing Updating",selected:!1,disabled:!1},{number:"B1113",title:"Detailed Planning",selected:!1,disabled:!1}],n.selectedPackages=[],n.select=function(e){n.packages[e].disabled||(n.packages[e].selected=n.packages[e].selected?!1:!0)},e.addedSelect=function(e){n.selectedPackages[e].selected=n.selectedPackages[e].selected?!1:!0},n.add=function(){n.packages.forEach(a)},n.remove=function(){for(var e=n.selectedPackages.length,a=0;e>a;)t(n.selectedPackages[a])||a++}}]),cascadiaControllers.controller("EngineerController",["$scope",function(e){function n(n){n.selected===!0&&n.disabled!==!0&&(e.selectedEngineers.push({number:n.number,name:n.name,paygrade:n.paygrade,selected:!1}),n.disabled=!0,n.selected=!1)}function a(n){if(void 0!==n&&n.selected===!0){for(var a=n.number,t=0;t<e.engineers.length;t++)e.engineers[t].number==a&&(e.engineers[t].disabled=!1);var s=e.selectedEngineers.indexOf(n);return s>-1&&e.selectedEngineers.splice(s,1),!0}return!1}e.engineers=[{number:"A1111",name:"Javier Olson",paygrade:"P4",selected:!1,disabled:!1},{number:"A1112",name:"Nancy Garcia",paygrade:"P5",selected:!1,disabled:!1},{number:"A1113",name:"David Bowden",paygrade:"SS",selected:!1,disabled:!1}],e.selectedEngineers=[],e.selectE=function(n){e.engineers[n].disabled||(e.engineers[n].selected=e.engineers[n].selected?!1:!0)},e.addedSelectE=function(n){e.selectedEngineers[n].selected=e.selectedEngineers[n].selected?!1:!0},e.addE=function(){e.engineers.forEach(n)},e.removeE=function(){for(var n=e.selectedEngineers.length,t=0;n>t;)a(e.selectedEngineers[t])||t++}}]),cascadiaControllers.controller("ManagerController",["$scope",function(e){function n(e){e.selected=!1}e.managers=[{id:"A1111",name:"Javier Olson",paygrade:"P4",selected:!1},{id:"A1112",name:"Nancy Garcia",paygrade:"P2",selected:!1},{id:"A1113",name:"David Bowden",paygrade:"P5",selected:!1},{id:"A1114",name:"Juan Burdine",paygrade:"SS",selected:!1}],e.selectedManager={},e.selectM=function(a){e.managers[a].id;e.managers.forEach(n),e.managers[a].selected=!0,e.selectedManager=e.managers[a]},e.cancel=function(){e.selectedManager={},e.managers.forEach(n)}}]),cascadiaControllers.controller("ProjectManagementController",["$scope","CascadiaService","Restangular",function(e,n,a){var t=a.all("projects");t.getList().then(function(n){e.projects=n}),e.add=function(){e.add_project=!0},e.save=function(){newproject=e.newproject,t.post(newproject).then(function(){e.projects.push(newproject),e.add_project=!1})}}]),cascadiaControllers.controller("ProfileController",["$scope","CascadiaService",function(){}]),cascadiaControllers.controller("UsersManagementController",["$scope","Restangular",function(e,n){var a=n.all("users");a.getList().then(function(n){e.users=n}),e.delete=function(n,a){n.remove().then(function(){e.users.splice(a,1)}),console.log("user deleted")},e.edit=function(e){e.put(),console.log(e)},e.add=function(){e.add_user=!0},e.save=function(){newuser=e.newuser,a.post(newuser).then(function(){e.add_user=!1})}}]);