var cascadiaControllers=angular.module("cascadiaControllers",["base64","restangular"]);cascadiaControllers.service("CascadiaService",function(e){e.user=JSON.parse(localStorage.getItem("user"))}),cascadiaControllers.controller("IndexController",["$scope","CascadiaService","$location",function(e,n,a){e.logout=function(){localStorage.clear(),a.path("/login")}}]),cascadiaControllers.controller("LoginController",["$scope","$base64","Restangular","$rootScope","$location","CascadiaService",function(e,n,a,s,r){e.login=function(){var s={username:e.username,password:e.password};a.one("user").post("token",s).then(function(s){e.encodedString=n.encode(s.token+":"),localStorage.setItem("token",e.encodedString),a.setDefaultHeaders({Authorization:"Basic "+e.encodedString}),a.one("user").get().then(function(e){localStorage.setItem("user",JSON.stringify(e)),r.path("/dashboard")})})}}]),cascadiaControllers.controller("DashboardController",["$scope","$rootScope","Restangular","CascadiaService",function(){}]),cascadiaControllers.controller("PackageController",["$scope",function(e){function n(n){n.selected===!0&&n.disabled!==!0&&(e.selectedPackages.push({number:n.number,title:n.title,selected:!1}),n.disabled=!0,n.selected=!1)}function a(n){if(void 0!==n&&n.selected===!0){for(var a=n.number,s=0;s<e.packages.length;s++)e.packages[s].number==a&&(e.packages[s].disabled=!1);var r=e.selectedPackages.indexOf(n);return r>-1&&e.selectedPackages.splice(r,1),!0}return!1}e.packages=[{number:"B1111",title:"Project Setup",selected:!1,disabled:!1},{number:"B1112",title:"Ongoing Updating",selected:!1,disabled:!1},{number:"B1113",title:"Detailed Planning",selected:!1,disabled:!1}],e.selectedPackages=[],e.select=function(n){e.packages[n].disabled||(e.packages[n].selected=e.packages[n].selected?!1:!0)},e.addedSelect=function(n){e.selectedPackages[n].selected=e.selectedPackages[n].selected?!1:!0},e.add=function(){e.packages.forEach(n)},e.remove=function(){for(var n=e.selectedPackages.length,s=0;n>s;)a(e.selectedPackages[s])||s++}}]),cascadiaControllers.controller("EngineerController",["$scope",function(e){function n(n){n.selected===!0&&n.disabled!==!0&&(e.selectedEngineers.push({number:n.number,name:n.name,paygrade:n.paygrade,selected:!1}),n.disabled=!0,n.selected=!1)}function a(n){if(void 0!==n&&n.selected===!0){for(var a=n.number,s=0;s<e.engineers.length;s++)e.engineers[s].number==a&&(e.engineers[s].disabled=!1);var r=e.selectedEngineers.indexOf(n);return r>-1&&e.selectedEngineers.splice(r,1),!0}return!1}e.engineers=[{number:"A1111",name:"Javier Olson",paygrade:"P4",selected:!1,disabled:!1},{number:"A1112",name:"Nancy Garcia",paygrade:"P5",selected:!1,disabled:!1},{number:"A1113",name:"David Bowden",paygrade:"SS",selected:!1,disabled:!1}],e.selectedEngineers=[],e.selectE=function(n){e.engineers[n].disabled||(e.engineers[n].selected=e.engineers[n].selected?!1:!0)},e.addedSelectE=function(n){e.selectedEngineers[n].selected=e.selectedEngineers[n].selected?!1:!0},e.addE=function(){e.engineers.forEach(n)},e.removeE=function(){for(var n=e.selectedEngineers.length,s=0;n>s;)a(e.selectedEngineers[s])||s++}}]),cascadiaControllers.controller("ManagerController",["$scope",function(e){function n(e){e.selected=!1}e.managers=[{id:"A1111",name:"Javier Olson",paygrade:"P4",selected:!1},{id:"A1112",name:"Nancy Garcia",paygrade:"P2",selected:!1},{id:"A1113",name:"David Bowden",paygrade:"P5",selected:!1},{id:"A1114",name:"Juan Burdine",paygrade:"SS",selected:!1}],e.selectedManager={},e.selectM=function(a){e.managers[a].id;e.managers.forEach(n),e.managers[a].selected=!0,e.selectedManager=e.managers[a]},e.cancel=function(){e.selectedManager={},e.managers.forEach(n)}}]),cascadiaControllers.controller("ProfileController",["$scope","CascadiaService",function(){}]),cascadiaControllers.controller("UsersManagementController",["$scope","Restangular",function(e,n){var a=n.all("users");a.getList().then(function(n){e.users=n}),e.delete=function(n,a){n.remove().then(function(){e.users.splice(a,1)}),console.log("user deleted")},e.edit=function(e){e.put(),console.log(e)},e.add=function(){e.add_user=!0},e.save=function(){newuser=e.newuser,a.post(newuser).then(function(){e.add_user=!1})}}]);